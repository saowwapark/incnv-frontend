<div>
  <!-- Filter -->
  <mat-form-field class="filter">
    <input matInput #filter placeholder="Filter" />
  </mat-form-field>
</div>
<table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
  <!-- Checkbox Column -->
  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      <mat-checkbox
        (change)="$event ? masterToggle() : null"
        [checked]="selection.hasValue() && isAllSelected()"
        [indeterminate]="selection.hasValue() && !isAllSelected()"
      >
      </mat-checkbox>
    </th>
    <td mat-cell *matCellDef="let element">
      <mat-checkbox
        (click)="$event.stopPropagation()"
        (change)="$event ? selection.toggle(element) : null"
        [checked]="selection.isSelected(element)"
      >
      </mat-checkbox>
    </td>
  </ng-container>

  <!-- File Name Column -->
  <ng-container matColumnDef="fileName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>File Name</th>
    <td mat-cell *matCellDef="let element">
      {{ element.fileName }}
    </td>
  </ng-container>
  <!-- cnvToolName Column -->
  <ng-container matColumnDef="cnvToolName">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>CNV Tool</th>
    <td mat-cell *matCellDef="let element">
      {{ element.cnvToolName }}
    </td>
  </ng-container>
  <!-- sampleset Column -->
  <ng-container matColumnDef="sampleset">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Sample Set</th>
    <td mat-cell *matCellDef="let element">
      <a (click)="onSampleset(element)">
        {{ element.samplesetName }}
      </a>
    </td>
  </ng-container>
  <!-- tags Column -->
  <ng-container matColumnDef="tags">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Tags</th>
    <td mat-cell *matCellDef="let element">
      <mat-chip-list>
        <mat-chip *ngFor="let tag of element.tags">
          {{ tag }}
        </mat-chip>
      </mat-chip-list>
    </td>
  </ng-container>
  <!-- date Column -->
  <ng-container matColumnDef="date">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Date</th>
    <td mat-cell *matCellDef="let element">11/11/2018</td>
  </ng-container>
  <!-- size Column -->
  <ng-container matColumnDef="size">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Size</th>
    <td mat-cell *matCellDef="let element">{{ element.size }}</td>
  </ng-container>
  <!-- download Column -->
  <ng-container matColumnDef="download">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Download</th>
    <td mat-cell *matCellDef="let element">
      <button mat-icon-button>
        <mat-icon>cloud_download</mat-icon>
      </button>
    </td>
  </ng-container>
  <!-- expandedSampleset column (colspan = all columns) -->
  <ng-container matColumnDef="expandedSampleset">
    <td
      mat-cell
      *matCellDef="let element"
      [attr.colspan]="displayedColumns.length"
    >
      <div
        class="expand-detail"
        fxLayout="column"
        [@expandedElement]="
          element == expandElem_sampleset ? 'expanded' : 'collapsed'
        "
      >
        <div class="expand-detail-header">
          Sample Set: {{ element.samplesetName }}
        </div>
        <mat-chip-list>
          <mat-chip
            *ngFor="let sampleName of getSampleNames(element.samplesetId)"
            color="accent"
            selected
          >
            {{ sampleName }}
          </mat-chip>
        </mat-chip-list>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let element; columns: displayedColumns"
    class="element-row"
  ></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['expandedSampleset']"
    class="detail-row"
  ></tr>
</table>

<!-- Paginator -->
<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
